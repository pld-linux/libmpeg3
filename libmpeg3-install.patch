--- libmpeg3-1.2.2.shared/Makefile.orig	Sun Nov 19 00:56:07 2000
+++ libmpeg3-1.2.2.shared/Makefile	Sun Nov 19 01:26:08 2000
@@ -87,9 +87,31 @@
 	video/slice_pic.o \
 	video/vlc_pic.o
 
+INSTALL_HEADERS = \
+	bitstream.h \
+	libmpeg3.h \
+	mpeg3atrack.h \
+	mpeg3css.h \
+	mpeg3demux.h \
+	mpeg3io.h \
+	mpeg3private.h \
+	mpeg3private.inc \
+	mpeg3title.h \
+	mpeg3vtrack.h \
+	timecode.h
+
+INSTALL_AHEADERS = \
+	audio/ac3.h \
+	audio/mpeg3audio.h
+
+INSTALL_VHEADERS = \
+	video/idct.h \
+	video/slice.h \
+	video/mpeg3video.h
+
 OUTPUT = libmpeg3.a
 OUTPUT_SHARED = libmpeg3.so.1.2.2
-UTILS = dump mpeg3cat mpeg3toc mpeg3split
+UTILS = mpeg3dump mpeg3cat mpeg3toc mpeg3split
 LIBS = -lm -lpthread
 
 all: $(OUTPUT) $(OUTPUT_SHARED) util
@@ -105,8 +127,8 @@
 	$(CC) $(CFLAGSSHARE) -o $(OUTPUT_SHARED) $(MMXOBJS_SHARED) $(VIDEOOBJS_SHARED) $(AUDIOOBJS_SHARED) $(IFOOBJS_SHARED) $(OBJS_SHARED)
 	ln -sf $(OUTPUT_SHARED) libmpeg3.so
 
-dump: dump.o $(OUTPUT_SHARED)
-	$(CC) -o dump dump.o -L. -lmpeg3 $(LIBS)
+mpeg3dump: dump.o $(OUTPUT_SHARED)
+	$(CC) -o mpeg3dump dump.o -L. -lmpeg3 $(LIBS)
 
 mpeg3cat: mpeg3cat.o $(OUTPUT_SHARED)
 	$(CC) -o mpeg3cat mpeg3cat.o -L. -lmpeg3 $(LIBS)
@@ -130,6 +152,20 @@
 	make -C video clean
 	rm -f core *.o *.so* $(OUTPUT)
 	rm -f $(UTILS)
+
+install:
+	install -d $(DESTDIR)/bin
+	install -d $(DESTDIR)/include/libmpeg3
+	install -d $(DESTDIR)/include/libmpeg3/audio
+	install -d $(DESTDIR)/include/libmpeg3/video
+	install -d $(DESTDIR)/lib
+	install $(UTILS) $(DESTDIR)/bin
+	install -m 644 $(INSTALL_HEADERS) $(DESTDIR)/include/libmpeg3
+	install -m 644 $(INSTALL_AHEADERS) $(DESTDIR)/include/libmpeg3/audio
+	install -m 644 $(INSTALL_VHEADERS) $(DESTDIR)/include/libmpeg3/video
+	install -m 644 $(OUTPUT) $(DESTDIR)/lib
+	install $(OUTPUT_SHARED) $(DESTDIR)/lib
+	ln -sf $(OUTPUT_SHARED) $(DESTDIR)/lib/libmpeg3.so
 
 backup: clean
 	cd .. && \
